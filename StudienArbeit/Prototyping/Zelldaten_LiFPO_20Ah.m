% Innenwiderstand einer Zelle in mOhm

3.27	1.71	1.70	1.68	1.67	1.66	1.63	1.62	1.60	1.58	1.51;
2.66	1.39	1.38	1.37	1.35	1.34	1.33	1.31	1.30	1.28	1.22;
2.32	1.21	1.20	1.19	1.18	1.17	1.16	1.15	1.13	1.11	1.06;
1.98	1.04	1.03	1.02	1.01	1.00	0.99	0.98	0.97	0.95	0.91;
1.87	0.98	0.97	0.96	0.95	0.95	0.93	0.93	0.92	0.90	0.86;
1.80	0.94	0.93	0.93	0.92	0.91	0.90	0.89	0.88	0.87	0.83

temperatur_Ri     = [-10 0 10 25 40 50]';
Soc_Ri            = (0:0.1:1)';


% max Zellströme in Ampere

batSoc_curLim = [0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0]';
batTem_curLim = [-40 -30 -20 -10 0 10 15 25 30 65 85];
                
disCurLim = [0	0	0	0	0	0	0	0	0	0	0
             0	16	15	17	19	21	23	24	25	27	28
             0	46	48	51	53	55	58	59	60	62	51
             0	66	72	75	85	89	91	94	96	96	78
             0	94	116	118	141	154	165	170	173	174	113
             0	199	200	200	200	200	200	200	200	200	164
             0	200	200	200	200	200	200	200	200	200	180
             0	200	200	200	200	200	200	200	200	200	200
             0	200	200	200	200	200	200	200	200	200	200
             0	200	200	200	200	200	200	200	200	200	200
             0	0	0	0	0	0	0	0	0	0	0]*batNumCelPll;

       
chrCurLim = [0	0	0	0	0	0	0	0	0	0	0
             0	0	0	0	0	0	0	0	0	0	0
             2	2	2	2	2	2	2	2	2	2	0
             6	6	6	6	6	6	6	6	6	6	0
            10	10	10	10	10	10	10	10	10	10	0
            20	20	20	20	20	20	20	20	20	20	0
            40	40	40	40	40	40	40	40	40	40	0
            60	60	60	60	60	60	60	60	60	60	0
            60	60	60	60	60	60	60	60	60	60	0
            60	60	60	60	60	60	60	60	60	60	0
            0	0	0	0	0	0	0	0	0	0	0]*batNumCelPll;
        
        
% Spannung und Kapazität

tem_Cap = [-30 -20 -10 0 10 25 35 45]';
batSoc_Cap = [0.000 0.021 0.023 0.028 0.036 0.043 0.050 0.059 0.071 0.083 0.105 0.153 0.229 0.305 0.375 0.494 0.582 0.682 0.761 0.864 0.939 0.986 0.995 1.000]';

% Korrekturfaktoren für Kapazität einer Zelle in Abhängigkeit der Temperatur
deltaChr_tem = [0.34 0.57 0.72 0.84 0.91 1.00 1.02 1.03]';

% Leerlaufspannung einer Zelle bei 25 °C in Abhängigkeit des SOC
batOcvCel = [2.005 2.120 2.208 2.301 2.389 2.505 2.588 2.708 2.821 2.936 3.031 3.115 3.164 3.189 3.207 3.229 3.235 3.244 3.260 3.271 3.286 3.306 3.352 3.421]';

% Batteriemodell

tmpRC = Rc*(1-exp(-timDif(timInx)/(Rc*C)));

tmp   = (batOcv/(2*(batResChr_soc_tem+tmpRC)))^2 - (pwrReq(timInx)+pwrChrEx(timInx))/(batResChr_soc_tem+tmpRC);

batCur(timInx) = batOcv/(2*(batResChr_soc_tem+tmpRC)) - sqrt(tmp);





